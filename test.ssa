function v $__format_to_buf(w %fmtbuf, w %format, w %var_args) {
  %si =w alloc 4
  %pi =w alloc 4
  %w =w alloc 4
  %zp =w alloc 4
  %pp =w alloc 4
  %v =w alloc 4
  %l =w alloc 4
  %t598 =w alloc 4
  %t491 =w copy 0
  %si =w copy %t491
  %t493 =w copy 0
  %pi =w copy %t493
  @L_for_begin_42
  %t494 =w copy 1
  %t495 =w mul %si, %t494
  %t496 =w add %format, %t495
  %t497 =b loadb %t496
  jnz %t497, @L_for_then_42, @L_34
  @L_for_then_42
  @L_if_begin_43
  %t498 =w copy 1
  %t499 =w mul %si, %t498
  %t500 =w add %format, %t499
  %t501 =b loadb %t500
  %t502 =w copy 37
  %t503 =w cne %t501, %t502
  jnz %t503, @L_if_then_43, @L_if_else_43
  @L_if_then_43
  %t504 =w copy %fmtbuf
  %t505 =w copy 1
  %t506 =w mul %si, %t505
  %t507 =w add %format, %t506
  %t508 =b loadb %t507
  %t509 =w copy %t508
  call $__fmtbuf_write_char(w %t504, w %t509)
  %t510 =w copy 1
  %si =w add %si, %t510
  %t511 =w copy -1
  %t512 =w add %si, %t511
  jmp @L_if_end_43
  @L_if_else_43
  %t514 =w copy 0
  %w =w copy %t514
  %t516 =w copy 0
  %zp =w copy %t516
  %t518 =w copy 0
  %pp =w copy %t518
  %t520 =w copy 4
  %t521 =w mul %pi, %t520
  %t522 =w add %var_args, %t521
  %t523 =w loadw %t522
  %v =w copy %t523
  %t524 =w copy 1
  %si =w add %si, %t524
  %t525 =w copy -1
  %t526 =w add %si, %t525
  @L_if_begin_44
  %t527 =w copy 1
  %t528 =w mul %si, %t527
  %t529 =w add %format, %t528
  %t530 =b loadb %t529
  %t531 =w copy 35
  %t532 =w ceq %t530, %t531
  jnz %t532, @L_if_then_44, @L_if_else_44
  @L_if_then_44
  %t534 =w copy 1
  %pp =w copy %t534
  %t535 =w copy 1
  %si =w add %si, %t535
  %t536 =w copy -1
  %t537 =w add %si, %t536
  jmp @L_if_end_44
  @L_if_else_44
  @L_if_end_44
  @L_if_begin_45
  %t538 =w copy 1
  %t539 =w mul %si, %t538
  %t540 =w add %format, %t539
  %t541 =b loadb %t540
  %t542 =w copy 48
  %t543 =w ceq %t541, %t542
  jnz %t543, @L_if_then_45, @L_if_else_45
  @L_if_then_45
  %t545 =w copy 1
  %zp =w copy %t545
  %t546 =w copy 1
  %si =w add %si, %t546
  %t547 =w copy -1
  %t548 =w add %si, %t547
  jmp @L_if_end_45
  @L_if_else_45
  @L_if_end_45
  @L_if_begin_46
  %t549 =w copy 1
  %t550 =w mul %si, %t549
  %t551 =w add %format, %t550
  %t552 =b loadb %t551
  %t553 =w copy 49
  %t554 =w cge %t552, %t553
  %t555 =w copy 1
  %t556 =w mul %si, %t555
  %t557 =w add %format, %t556
  %t558 =b loadb %t557
  %t559 =w copy 57
  %t560 =w cle %t558, %t559
  %t561 =w and %t554, %t560
  jnz %t561, @L_if_then_46, @L_if_else_46
  @L_if_then_46
  %t563 =w copy 1
  %t564 =w mul %si, %t563
  %t565 =w add %format, %t564
  %t566 =b loadb %t565
  %t567 =w copy 48
  %t568 =w sub %t566, %t567
  %w =w copy %t568
  %t569 =w copy 1
  %si =w add %si, %t569
  %t570 =w copy -1
  %t571 =w add %si, %t570
  @L_for_begin_47
  %t572 =w copy 1
  %t573 =w mul %si, %t572
  %t574 =w add %format, %t573
  %t575 =b loadb %t574
  %t576 =w copy 48
  %t577 =w cge %t575, %t576
  %t578 =w copy 1
  %t579 =w mul %si, %t578
  %t580 =w add %format, %t579
  %t581 =b loadb %t580
  %t582 =w copy 57
  %t583 =w cle %t581, %t582
  %t584 =w and %t577, %t583
  jnz %t584, @L_for_then_47, @L_36
  @L_for_then_47
  %t585 =w copy 10
  %w =w mul %w, %t585
  %t586 =w copy 1
  %t587 =w mul %si, %t586
  %t588 =w add %format, %t587
  %t589 =b loadb %t588
  %t590 =w copy 48
  %t591 =w sub %t589, %t590
  %w =w add %w, %t591
  %t592 =w copy 1
  %si =w add %si, %t592
  %t593 =w copy -1
  %t594 =w add %si, %t593
  @L_37
  jmp @L_for_begin_47
  @L_36
  jmp @L_if_end_46
  @L_if_else_46
  @L_if_end_46
  %t595 =w copy 1
  %t596 =w mul %si, %t595
  %t597 =w add %format, %t596
  %t598 =b loadb %t597
  %t599 =w ceq %t598, 37
  jnz %t599, @L_44, @L_case_48
  @L_case_48
  %t600 =w ceq %t598, 120
  jnz %t600, @L_43, @L_case_49
  @L_case_49
  %t601 =w ceq %t598, 100
  jnz %t601, @L_42, @L_case_50
  @L_case_50
  %t602 =w ceq %t598, 111
  jnz %t602, @L_41, @L_case_51
  @L_case_51
  %t603 =w ceq %t598, 99
  jnz %t603, @L_40, @L_case_52
  @L_case_52
  %t604 =w ceq %t598, 115
  jnz %t604, @L_39, @L_38
  @L_39
  %t607 =w copy %v
  %t608 =w call $strlen(w %t607)
  %l =w copy %t608
  %t609 =w copy %fmtbuf
  %t610 =w copy %v
  %t611 =w copy %l
  call $__fmtbuf_write_str(w %t609, w %t610, w %t611)
  jmp @L_38
  @L_40
  %t612 =w copy %fmtbuf
  %t613 =w copy %v
  call $__fmtbuf_write_char(w %t612, w %t613)
  jmp @L_38
  @L_41
  %t614 =w copy %fmtbuf
  %t615 =w copy %v
  %t616 =w copy %w
  %t617 =w copy %zp
  %t618 =w copy 8
  %t619 =w copy %t618
  %t620 =w copy %pp
  call $__format(w %t614, w %t615, w %t616, w %t617, w %t619, w %t620)
  jmp @L_38
  @L_42
  %t621 =w copy %fmtbuf
  %t622 =w copy %v
  %t623 =w copy %w
  %t624 =w copy %zp
  %t625 =w copy 10
  %t626 =w copy %t625
  %t627 =w copy 0
  %t628 =w copy %t627
  call $__format(w %t621, w %t622, w %t623, w %t624, w %t626, w %t628)
  jmp @L_38
  @L_43
  %t629 =w copy %fmtbuf
  %t630 =w copy %v
  %t631 =w copy %w
  %t632 =w copy %zp
  %t633 =w copy 16
  %t634 =w copy %t633
  %t635 =w copy %pp
  call $__format(w %t629, w %t630, w %t631, w %t632, w %t634, w %t635)
  jmp @L_38
  @L_44
  %t636 =w copy %fmtbuf
  %t637 =w copy 37
  %t638 =w copy %t637
  call $__fmtbuf_write_char(w %t636, w %t638)
  %t639 =w copy 1
  %si =w add %si, %t639
  %t640 =w copy -1
  %t641 =w add %si, %t640
  jmp @L_35
  @L_38
  %t642 =w copy 1
  %pi =w add %pi, %t642
  %t643 =w copy -1
  %t644 =w add %pi, %t643
  %t645 =w copy 1
  %si =w add %si, %t645
  %t646 =w copy -1
  %t647 =w add %si, %t646
  @L_if_end_43
  @L_35
  jmp @L_for_begin_42
  @L_34
  @L_if_begin_54
  %t648 =w add %fmtbuf, 8
  %t650 =w loadw %t648
  jnz %t650, @L_if_then_54, @L_if_else_54
  @L_if_then_54
  %t652 =w add %fmtbuf, 0
  %t654 =w loadw %t652
  %t655 =w copy 0
  %t656 =w add %t654, %t655
  %t657 =b copy 0
  storeb %t656, %t657
  jmp @L_if_end_54
  @L_if_else_54
  @L_if_end_54
  ret
}